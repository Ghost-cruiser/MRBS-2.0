(function(){"use strict";angular.module("authentication",[])})(),function(){"use strict";function n(n,t,i){function u(){r.dataLoading=!0;t.Login(r.username,r.password,function(u){u.success?(t.SetCredentials(r.username,r.password),n.path("/")):(i.Error(u.message,!0),r.dataLoading=!1,alert(u.message))})}var r=this;return r.login=u,r}angular.module("authentication").controller("loginCtrl",["$location","AuthenticationService","FlashService",n])}(),function(){"use strict";function n(n,t,i){function u(t,i,r){n.post("http://localhost:1337/api/authenticate",{username:t,password:i}).then(function(n){r(n.data)}).catch(function(){r({message:"Erreur"})})}function f(r,u){var f=o().encode(r+u);i.globals={currentUser:{username:r,authdata:f}};i.loggedIn=!0;n.defaults.headers.common.Authorization="Basic "+f;t.put("globals",i.globals)}function e(){i.globals={};i.loggedIn=!1;t.remove("globals");n.defaults.headers.common.Authorization="Basic "}function o(){return{keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(n){var o="",u,t,i="",s,h,f,r="",e=0;do u=n.charCodeAt(e++),t=n.charCodeAt(e++),i=n.charCodeAt(e++),s=u>>2,h=(u&3)<<4|t>>4,f=(t&15)<<2|i>>6,r=i&63,isNaN(t)?f=r=64:isNaN(i)&&(r=64),o=o+this.keyStr.charAt(s)+this.keyStr.charAt(h)+this.keyStr.charAt(f)+this.keyStr.charAt(r),u=t=i="",s=h=f=r="";while(e<n.length);return o},decode:function(n){var t="",e,o,s="",h,u,i,f="",r=0;/[^A-Za-z0-9\+\/\=]/g.exec(n)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do h=this.keyStr.indexOf(n.charAt(r++)),u=this.keyStr.indexOf(n.charAt(r++)),i=this.keyStr.indexOf(n.charAt(r++)),f=this.keyStr.indexOf(n.charAt(r++)),e=h<<2|u>>4,o=(u&15)<<4|i>>2,s=(i&3)<<6|f,t=t+String.fromCharCode(e),i!=64&&(t=t+String.fromCharCode(o)),f!=64&&(t=t+String.fromCharCode(s)),e=o=s="",h=u=i=f="";while(r<n.length);return t}}}var r={};return r.Login=u,r.SetCredentials=f,r.ClearCredentials=e,r}angular.module("authentication").service("AuthenticationService",["$http","$cookies","$rootScope",n])}(),function(){"use strict";function n(n,t,i,r){function u(){i.CurrentUser=t.loggedIn?t.globals.currentUser.username:"Visiteur"}i.toAuthentication=function(){n.path("/Authentification").replace()};i.unlogUser=function(){r.ClearCredentials();n.path("/Authentification").replace()};t.$watch("loggedIn",u,!0)}angular.module("authentication").controller("UserController",["$location","$rootScope","$scope","AuthenticationService",n])}(),function(){"use strict";angular.module("areas",[])}(),function(){"use strict";function n(n){function i(){this.option="Modifier";this.areaEdited=t.selectedArea;this.editArea=!0}function r(){this.option="Ajouter";this.editArea=!0}function u(){}function f(){t.areaEdited!=""&&n.SaveArea({areaName:t.areaEdited})}function e(){t.selectedRoom.id==null&&n.SaveRoom({AreaId:t.selectedArea.id,roomName:t.selectedRoom.roomName,roomDescription:t.selectedRoom.roomDescription,capacity:t.selectedRoom.capacity,priceForALeague:t.selectedRoom.priceForALeague,priceForAClub:t.selectedRoom.priceForAClub,priceForAPerson:t.selectedRoom.priceForAPerson})}var t=this;return t.Areas=[],t.Rooms=[],t.selectedArea={},t.edit=i,t.add=r,t.saveArea=f,t.deleteArea=u,t.saveRoom=e,t.option="",t.editArea=!1,t.addRoom=!1,n.GetAreas().then(function(n){t.Areas=n.data;t.selectedArea=t.Areas[0]}),t}angular.module("areas").controller("AreaEditController",["AreaService",n])}(),function(){"use strict";angular.module("periodicity",[])}(),function(){"use strict";function n(n){return{scope:{selectedDate:"=selectedDate",periodicityParameter:"=periodicityParameter",periodicityType:"=periodicityType",repeat:"=repeat"},template:'<div> <div> <label> <input type="radio" name="periodicity" data-ng-model="viewPeriodicity[\'key\']" value="Week" data-ng-change="ctrl.setViewPeriodicity(\'Week\')" /> Semaine <\/label> <label> <input type="radio" name="periodicity" data-ng-model="viewPeriodicity[\'key\']" value="Month" data-ng-change="ctrl.setViewPeriodicity(\'Month\')" /> Mois <\/label> <label> <input type="radio" name="periodicity" data-ng-model="viewPeriodicity[\'key\']" value="Year" data-ng-change="ctrl.setViewPeriodicity(\'Year\')" /> Ann\u00e9e <\/label> <\/div> <div> <div data-ng-if="ctrl.viewPeriodicity.Week"> <label> Intervalle de semaines : <input type="number"data-ng-change="ctrl.checkValidityWeekSpan()"data-ng-model="ctrl.WeekSpan" /> <\/label> <\/div> <div> <div data-ng-if="ctrl.viewPeriodicity.Month"> <label> <input type="radio" data-ng-model="ctrl.first" data-ng-value="true" data-ng-change="ctrl.setMonthlyParameters()" />Tous les {{ctrl.something}} du mois <\/label> <label> <input type="radio" data-ng-model="ctrl.first" data-ng-value="false" data-ng-change="ctrl.setMonthlyParameters()" />Le {{ctrl.something1 + \'\' + ctrl.something2}} de chaque mois <\/label> <\/div> <div data-ng-if="ctrl.viewPeriodicity.Year"><\/div> <\/div> <div> <label> <input type="checkbox" data-ng-model="ctrl.periodicity" /> R\u00e9p\u00e9ter <\/label> <input type="number"data-ng-change="ctrl.checkValidityRepeat()"data-ng-model="repeat" /><\/div> <\/div> <\/div>',replace:!0,controllerAs:"ctrl",controller:["$scope",function(t){function e(){var u=n.Week.maximumSpan;i.WeekSpan=r(i.WeekSpan,1,u);t.periodicityParameter=i.WeekSpan}function o(){var i=n[t.viewPeriodicity.key].maximumRepeat,u=t.repeat;t.repeat=r(u,0,i)}function r(n,t,i){return n<t?n=t:n>i&&(n=i),n}function s(n,r){angular.isDate(n)?(t.selectedDate=n,i.viewPeriodicity.Month&&f()):t.selectedDate=r}function h(n){angular.forEach(i.viewPeriodicity,function(t,r){i.viewPeriodicity[r]=n==r});n=="Month"?(f(),u(),t.periodicityType=2):n=="Week"?(t.periodicityType=1,t.periodicityParameter=i.WeekSpan):n=="Year"?(t.periodicityType=3,t.periodicityParameter=""):console.log("error setting periodicity : paramater did not match")}function u(){t.periodicityParameter=i.first?i.something:i.something1+" "+i.something2}function f(){var u=new Date(t.selectedDate).getDate(),n=0,r=u;do r=r-7,n++;while(r>0);n>=4?n="dernier":n===1?n="premier":n+="e";i.something=u;i.something1=n;i.something2=i.days[new Date(t.selectedDate).getDay()]}var i=this;return angular.extend(i,{setViewPeriodicity:h,checkValidityRepeat:o,checkValidityWeekSpan:e,setMonthlyParameters:u,days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi",],viewPeriodicity:{},WeekSpan:1}),angular.extend(i.viewPeriodicity,{Week:!1,Month:!1,Year:!1}),t.$watch("selectedDate",s,!0),t.repeat=1,i}]}}angular.module("periodicity").directive("nwPeriodicity",["SettingsPeriodicityService",n])}(),function(){"use strict";angular.module("booking",["periodicity"])}(),function(){function n(){function n(n){return n?i(n):t()}function t(){return{dateStart:new Date,dateEnd:new Date,RoomId:0,periodicityType:0,periodicityParameter:"default",repeat:0,typeOfLocation:0,title:"Titre",description:"description"}}function i(n){return{dateStart:n.dateStart,dateEnd:n.dateEnd,periodicityType:n.periodicityType,periodicityParameter:n.periodicityParameter,repeat:n.repeat,RoomId:n.RoomId,typeOfLocation:n.typeOfLocation,title:n.title,description:n.description}}return n}angular.module("booking").factory("Entry",[n])}(),function(){"use strict";function n(n){function t(t){n._post("entries",t).then(function(n){console.log(n)},function(n){console.log("Ops: "+n.error)})}return this.SaveEntries=t,this}angular.module("booking").service("BookingService",["ContextService",n])}(),function(){"use strict";function n(n,t,i,r,u){function o(n){function i(n){n=u.french.convertToFrenchDay(n);angular.forEach(f.selectedDays,function(t,i){f.selectedDays[i]=i==f.days[n]?!0:!1})}if(angular.isDate(n)){f.entry.dateStart=n;var t=new Date(n);f.entry.dateEnd.setYear(t.getFullYear());f.entry.dateEnd.setMonth(t.getMonth());f.entry.dateEnd.setDate(t.getDate());i(t.getDay())}}function s(){f.selectedRooms&&(e&&(f.bookedRooms=[],e=!1),angular.forEach(f.selectedRooms,function(n){f.bookedRooms.push(n);var t=f.selectedArea.Rooms.indexOf(n);f.selectedArea.Rooms.splice(t,1)}),f.selectedBookedRooms=f.bookedRooms[0])}function h(){f.type=="Ponctuel"?(f.type="P\u00e9riodique",f.viewPerio=!0):(f.type="Ponctuel",f.viewPerio=!1)}function c(){var n=r.Analyze(f.entry,f.selectedDays,f.bookedRooms);n&&t.SaveEntries(n)}var e=!0,f=this;return angular.extend(f,{switchView:h,bookRooms:c,addSelectedRooms:s,onDateChanged:o,type:"Ponctuel",days:["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche",],entry:i(),selectedRooms:[],selectedBookedRooms:[],viewPeriodicity:{},selectedDays:{Lundi:!1,Mardi:!1,Mercredi:!1,Jeudi:!1,Vendredi:!1,Samedi:!1,Dimanche:!1}}),n.GetAreas().then(function(n){f.Areas=n.data;f.selectedArea=f.Areas[0];f.selectedRooms=f.selectedArea.Rooms[0]}),f}angular.module("booking").controller("BookingController",["AreaService","BookingService","Entry","AnalyzerService","Datetime",n])}(),function(){"use strict";angular.module("booking").factory("TimeSpanFactory",["$filter",function(n){function t(n){var i=[],t=0;do i[t]=t*n,i[t]===0&&(i[t]="00"),t++;while(t*n<60);return i}function i(t,i){function o(t){return n("date")(t,"HH")}for(var u=[],e=i.getHours(),f=0,r=new Date(t);r.getHours()<=e;)u[f]=o(r),r.setHours(r.getHours()+1),f++;return u}function r(n,t){return parseInt(n.hours)<parseInt(t.hours)?!1:parseInt(n.hours)>parseInt(t.hours)?!0:parseInt(n.minutes)>parseInt(t.minutes)?!0:!1}function u(n,t){function i(n){if(n.minutes>=60)n.hours=parseInt(n.hours)+1,n.minutes-=60,i(n);else return n}return n.minutes=parseInt(n.minutes)+parseInt(t),i(n),n}function f(n,t){function i(n){if(n.minutes<0)n.hours=parseInt(n.hours)-1,n.minutes+=60,i(n);else return n}return n.minutes=parseInt(n.minutes)-t,i(n),n}return{BuildArrayOfMinutes:t,BuildArrayOfHours:i,AddMinutesToTime:u,RemoveMinutesFromTime:f,IsOver:r}}])}(),function(n){"use strict";function t(t,i,r){return{scope:{dateStart:"=dateStart",dateEnd:"=dateEnd"},template:'<div><div> Heure de d\u00e9but : <div class="flex-line" data-ng-model="timeStart"><select data-ng-model="timeStart.hours" class="form-control" data-ng-options="hour for hour in ctrl.AvailableHours"><\/select> <select data-ng-model="timeStart.minutes" class="form-control" data-ng-options="minutes for minutes in ctrl.AvailableMinutes"><\/select><\/div> <\/div><div data-ng-model="ctrl.dateEnd"> Heure de fin : <div class="flex-line" data-ng-model="timeEnd"><select data-ng-model="timeEnd.hours" class="form-control" data-ng-options="hour for hour in ctrl.AvailableHours"> <\/select> <select data-ng-model="timeEnd.minutes" class="form-control" data-ng-options="minutes for minutes in ctrl.AvailableMinutes"> <\/select> <\/div> <\/div> <\/div>',controllerAs:"ctrl",controller:["$scope",function(u){function l(){function n(n,t){n!=t&&(h(n,"end"),o())}function t(n,t){n!=t&&(h(n,"start"),s())}u.timeEnd=r();u.timeStart=r();c();o();s();u.$watch("timeStart",t,!0);u.$watch("timeEnd",n,!0)}function h(n,e){var h=t.IsOver(n,f.configTimeEnd),c=t.IsOver(f.configTimeStart,n),o=r(u.timeStart),s;o=t.AddMinutesToTime(o,i.MinimalTimeRent);s=t.IsOver(o,u.timeEnd);(h||c||s)&&(e=="start"?a(n,h,c,s,o):v(n,h,c,s))}function a(n,i,r,o,h){var c=!1;r?(e(n,f.configTimeStart),c=!0):i||t.IsOver(h,f.configTimeEnd)?(y(),c=!0):e(u.timeEnd,h);c&&s()}function v(n,s,h,l,a){var v=!1,a,y;s?(e(n,f.configTimeEnd),v=!0):(a=r(u.timeEnd),y=t.RemoveMinutesFromTime(u.timeEnd,i.MinimalTimeRent),h||IsOver(f.configTimeStart,y)?(c(),v=!0):e(u.timeStart,y));v&&o()}function c(){e(u.timeStart,f.configTimeStart);var n=r(f.configTimeStart);e(u.timeEnd,t.AddMinutesToTime(n,i.MinimalTimeRent))}function y(){e(u.timeEnd,f.configTimeEnd);var n=r(f.configTimeEnd);e(u.timeStart,t.RemoveMinutesFromTime(n,i.MinimalTimeRent))}function o(){u.dateEnd.setHours(parseInt(u.timeEnd.hours));u.dateEnd.setMinutes(parseInt(u.timeEnd.minutes))}function s(){u.dateStart.setHours(parseInt(u.timeStart.hours));u.dateStart.setMinutes(parseInt(u.timeStart.minutes))}function e(n,t){function i(n,t){for(var i=0;i<n.length;i++)if(parseInt(n[i])==t)return n[i]}n.minutes=i(f.AvailableMinutes,t.minutes);n.hours=i(f.AvailableHours,t.hours)}var f=this;return u.dateStart||(u.dateStart=new Date),u.dateEnd||(u.dateEnd=new Date),n.extend(f,{configTimeEnd:r(new Date(i.OpeningHours.end)),configTimeStart:r(new Date(i.OpeningHours.start)),AvailableHours:t.BuildArrayOfHours(i.OpeningHours.start,i.OpeningHours.end),AvailableMinutes:t.BuildArrayOfMinutes(i.MinimalSlotSize)}),l(),f}]}}n.module("booking").directive("nwTimeSpan",["TimeSpanFactory","settingsLocationService","Time",t])}(window.angular),function(){"use strict";function n(n){function i(n,t){return n?(n==2&&!t,!0):!1}function r(t,i){var s=i.periodicityType,c=i.periodicityParameter,o=0,f=0,h,e,r;if(s===1)for(e=0;e<i.repeat;e++){for(f=t.length,r=o;r<f;r++)h=7*c,t.push(n.calcul.addDaysToDate(t[r],h));o=f}else if(s==3)for(e=0;e<i.repeat;e++){for(f=t.length,r=o;r<f;r++)t.push(n.calcul.addYearsToDate(t[r],1));o=f}else t=u(t,i.periodicityParameter,i.dateStart,i.repeat);return t}function u(t,i,r,u){function e(n,t,i,r){var u=t.indexOf(" "),e=t.substr(0,u),o=t.substr(u+1,t.length-u);return e=="premier"?f(1,o,r,i,n):e=="dernier"?s(o,r,i,n):f(parseInt(e),o,r,i,n)}function o(t,i,r){for(var u=0;u<r;u++)t.push(n.calcul.addMonthsToDate(new Date(i),u+1));return t}function f(t,i,r,u,f){for(var e,s=n.french.convertToEnglishDay(i),c=new Date(u).setDate(1),o=0;o<r;o++)e=n.calcul.addMonthsToDate(c,o+1),e=h(t,s,e),f.push(e);return f}function s(t,i,r,u){for(var s=n.french.convertToEnglishDay(t),f=n.calcul.addMonthsToDate(new Date(r),1),o,f=new Date(f).setDate(n.month.getMonthLength(f)),e=0;e<i;e++)f=n.calcul.addMonthsToDate(new Date(r),1),o=n.month.getMonthLength(f),f=new Date(f).setDate(o),u.push(f);return u}function h(t,i,r){var u,f;for(r=new Date(r),u=r.getDay(),u>i?r=n.calcul.addDaysToDate(r,7-(u-i)):u<i&&(r=n.calcul.addDaysToDate(r,i-u)),f=1;f<t;)r=n.calcul.addDaysToDate(r,7),f++;return r}return angular.isNumber(i)?o(t,r,u):e(t,i,r,u)}var t=this;return t.Analyze=i,t.Build=r,this}angular.module("booking").service("PeriodicityAnalyzer",["Datetime",n])}(),function(){"use strict";function n(n){function i(t,i){function f(t,i){var f=n.french.dayInFrench(i.getDay()),r=[],e=0,u=0;return angular.forEach(t,function(t,i){t&&(i!=f?r.push(n.french.days.indexOf(i)):u=n.french.days.indexOf(i));e++}),{days:r,dayIndex:u}}function e(t,i){var r=new Date(t),o=[],s=n.french.convertToEnglishDay(i.dayIndex),u,f,e;for(o.push(new Date(t)),u=0;u<i.days.length;u++)f=n.french.convertToEnglishDay(i.days[u]),f<s?(e=s-f,r=n.removeDaysFromDate(r,e),n.calcul.isDateOver(r,new Date)||(r=n.calcul.addDaysToDate(r,7))):(e=f-s,r=n.calcul.addDaysToDate(r,e)),o.push(new Date(r));return o}var u=new Date(i),r=f(t,i),o;return r.days.length>0?e(i,r):[u]}var t=this;return t.Analyze=i,this}angular.module("booking").service("DaysAnalyzer",["Datetime",n])}(),function(){"use strict";function n(n,t,i,r){function f(n,t,u){var s=e(n,u),h=i.Analyze(n.periodicityType,n.periodicityParameter),f=r.Analyze(t,new Date(n.dateStart));return h&&(f=i.Build(f,n)),f&&(s=o(f,s)),s}function e(t,i){for(var u,f=[],r=0;r<i.length;r++)u=n(t),u.RoomId=i[r].id,f.push(u);return f}function o(t,i){for(var r=0,o=i.length,e=[],u,f,r=0;r<o;r++)for(u=0;u<t.length;u++)f=n(i[r]),f.dateStart=t[u],e.push(f);return e}var u=this;return u.Analyze=f,this}angular.module("booking").service("AnalyzerService",["Entry","Datetime","PeriodicityAnalyzer","DaysAnalyzer",n])}(),function(){"use strict";angular.module("events",[])}(),function(n){"use strict";n.module("events").directive("nwEvent",[function(){return{scope:{data:"=eventData",timeSlots:"=timeSlots",idColumn:"=idColumn"},templateUrl:'<div style="position:absolute; padding: 5px 5px 5px 5px" data-ng-style="{left:data.left, top:data.top, height:data.height, width:data.width}"><div class="view-events"style="position:absolute; z-index:2;"data-ng-class="{highlightCell: hover}"data-ng-mouseenter="hover = true"data-ng-mouseleave="hover = false"> <\/div><\/div>',restrict:"A",require:"^nwDatagrid",link:function(n,t,i,r){function e(t,i){var u=i(),r=o(u);t.height=r.height*s(n.data.dateStart,n.data.dateEnd)+"px";t.left=r.left+"px";t.top=r.top+"px";t.width=r.width+"px";t.view=!0}function o(n){var t=n.getBoundingClientRect(),i=document.body,r=document.documentElement,u=window.pageYOffset||r.scrollTop||i.scrollTop,f=window.pageXOffset||r.scrollLeft||i.scrollLeft,e=r.clientTop||i.clientTop||0,o=r.clientLeft||i.clientLeft||0,s=t.top+u-e,h=t.left+f-o,c=t.width,l=t.height;return{top:Math.round(s),left:Math.round(h),width:Math.round(c),height:Math.round(l)}}function s(t,i){for(var f=new Date(i).getTime()-new Date(t).getTime(),u,r=1;r<22;r++)if(u=n.timeSlots[r].getTime()-n.timeSlots[0].getTime(),u==f)return r+1;return r}function u(t){for(var i=0,u=new Date(t).setFullYear(1970,0,1),r,i=0;i<22;i++)if(r=n.timeSlots[i].getTime()-u+36e5,r==0)return i;return i}var f=function(){if(n.idColumn)return document.getElementById(u(n.data.dateStart)+":"+n.data[n.idColumn]);var t=new Date(n.data.dateStart).getDay();return document.getElementById(u(n.data.dateStart)+":"+t)};e(n.data,f);r.addViewData(n)}}}])}(window.angular),function(){"use strict";function n(n){function r(i,r){return n._post(t+"room/"+i,r)}function u(r,u){return u.rooms=r,n._post(t+"rooms",i,u)}var t="entries/dateStart/dateEnd/",i="Error getting Areas";return this.GetEntriesByRoomForTimeRange=r,this.GetEntriesForRoomsForTimeRange=u,this}angular.module("events").service("EventsService",["ContextService","NotificationService",n])}(),function(){"use strict";angular.module("planning",["events"])}(),function(){"use strict";function n(n,t,i,r,u){function a(){n.selectedDate=new Date;i.GetAreas().then(function(t){f.Areas=t.data;n.selectedArea=f.Areas[0];n.selectedRoom=n.selectedArea.Rooms[0]});n.planningTable={columnsHeadersProperty:"",columns:[]};n.planningEvents={idColumn:""};n.$watch("selectedArea",h,!0);n.$watch("selectedDate",s,!0);n.$watch("selectedRoom",l,!0)}function o(t){var i=n.selectedDate;f.mode=t;t=="RoomMode"?(n.planningTable.columnsHeadersProperty="header",n.planningEvents.idColumn=null,s()):(n.planningTable.columnsHeadersProperty="roomName",n.planningEvents.idColumn="RoomId",n.tableClasses="table-responsive table-condensed",n.selectedArea&&h())}function s(){f.mode=="RoomMode"?(f.planningWeek=u.WeekFromDate(n.selectedDate),n.planningTable.columns=f.planningWeek.fullWeek,l()):c()}function h(){var t=n.selectedArea;t&&(angular.forEach(t.Rooms,function(n,t){f.roomsIds[t]=n.id}),f.mode!="RoomMode"?t.Rooms.length==1?(o("RoomMode"),n.selectedRoom=n.selectedArea.Rooms[0]):(n.planningTable.columns=n.selectedArea.Rooms,c()):n.selectedRoom=n.selectedArea.Rooms[0])}function c(){var t=u.timeRangeFromDay(n.selectedDate);t.rooms=f.roomsIds;r.GetEntriesForRoomsForTimeRange(u.timeRangeFromDay(n.selectedDate),f.roomsIds).then(function(t){n.Entries=t})}function l(){if(n.selectedRoom){var t={dateStart:f.planningWeek.dateStart,dateEnd:f.planningWeek.dateEnd};r.GetEntriesByRoomForTimeRange(n.selectedRoom.id,t).then(function(t){n.Entries=t})}}var f=this,e;for(f.Areas=[],f.timeSlots=[],f.roomsIds=[],f.mode="",f.dataSource=[22],f.timeSlots=u.timeSlotsHours(8,30,22),e=0;e<22;e++)f.dataSource[e]=[7,7,7,7,7,7,7];return f.setPlanningMode=o,f.selectDate=function(t){n.selectedDate=t},a(),o("RoomMode"),f}angular.module("planning").controller("PlanningController",["$scope","$filter","AreaService","EventsService","timeSlotsFactory",n])}(),function(){"use strict";angular.module("planning").factory("timeSlotsFactory",["$filter",function(n){function i(n,t,i){for(var e=[i],r=0,u=new Date(1970,0,1,n,t),r=0;r<i;r++)e[r]=u,u=f(u,30);return e}function r(t){for(var f=[7],e,o={},i=0,u=1-new Date(t).getDay(),s=new Date(t).getDate(),u=u+s,i=0;i<7;i++){var r=new Date(t).setDate(u),h=n("date")(r,"EEEE dd/MM"),c={DayOfWeek:r,header:h,id:new Date(r).getDay()};f[i]=c;i==0?e=n("date")(r,"yyyy-MM-dd HH:mm:ss"):i==6&&(o=n("date")(r,"yyyy-MM-dd HH:mm:ss"));u++}return{fullWeek:f,dateStart:e,dateEnd:o}}function u(n){var i=new Date(n),t;return i.setMinutes(0),i.setHours(1),i.setMilliseconds(0),i.setSeconds(0),t=new Date(n),t.setMinutes(59),t.setHours(24),t.setMilliseconds(999),t.setSeconds(59),{dateStart:i,dateEnd:t}}function f(n,t){return new Date(n.getTime()+t*6e4)}var t=this;return t.timeSlotsHours=i,t.WeekFromDate=r,t.timeRangeFromDay=u,t}])}(),function(){"use strict";angular.module("nwprototypes",[])}(),function(){"use strict";angular.module("nwprototypes").directive("nwDatePicker",[function(){return{scope:{selectedDate:"=selectedDate",onDateChanged:"=onDateChanged"},template:'<div class="datepicker" style="display:inline;"> <input data-ng-model="selectedDate" type="date" style="width: 150px; border:none;"><span class="glyphicon glyphicon-calendar" data-ng-click="viewCalendar = !viewCalendar"><\/span><div class="container"style="position:absolute; top:60px; z-index:1; left:50%;background-color:white; border:solid"data-ng-if="viewCalendar"><div data-nw-calendar="" number-of-months="1"><\/div> <\/div> <\/div>',controller:["$scope",function(n){n.selectedDate=new Date;n.onDateChanged&&n.$watch("selectedDate",n.onDateChanged,!0)}]}}])}(),function(n){"use strict";n.module("nwprototypes").directive("nwDatagrid",[function(){return{template:'<table data-ng-class="TableClasses"style="position: relative"><thead> <tr> <th data-ng-class="HeaderClasses" class="col-header" data-ng-if="AreRowHeadersVisible"><\/th><th data-ng-repeat="(keyHeaderColumn, header) in Headers track by $index | limitTo:LimitColumns"data-ng-class="HeaderClasses"> {{ header[propHeader] }} <\/th> <\/tr> <\/thead><tbody> <tr data-ng-click="selectContent(keyLine)" data-ng-repeat="(keyLine, line) in Datasource track by $index | limitTo:LimitRows"><td class="{{HeaderClasses}}" data-ng-if="AreRowHeadersVisible" > <div> {{RowHeaders[keyLine] | date : \'HH:mm\'}} <\/div> <\/td><td data-ng-class="{highlightCell: hover || Datasource[keyLine][keyCol].selected}" data-ng-mouseenter="hover = true" data-ng-mouseleave="hover = false" data-ng-repeat="(keyCol, column) in Datasource[keyLine] track by $index | limitTo:LimitColumns" data-ng-attr-id="{{\'c\'+ \'(\' + keyLine + \':\' + keyCol + \')\'}}" data-ng-click="selectContent(keyLine, keyCol)"><div data-ng-if="!HideDatasourceContent">{{Datasource[keyLine][keyCol]}}<\/div> <div data-ng-if="HideDatasourceContent"><\/div><\/td> <\/tr> <\/tbody> <\/table> <div data-ng-transclude><\/div>',transclude:!0,scope:{Datasource:"=datasource",SelectedItem:"&",HideDatasourceContent:"=hideDatasourceContent",Headers:"=headers",propHeader:"=propHeader",RowHeaders:"=rowHeaders",TableClasses:"=tableClasses",HeaderClasses:"=headerClasses",AreRowHeadersVisible:"=areRowHeadersVisible",FilterCell:"=filterCell",LimitColumns:"=limitColumns",LimitRows:"=limitRows",selectionType:"=selectionType",onSelectedItemChanged:"&"},controller:["$scope",function(t){var u=this,i={x:"",y:""},f,r;if(u.viewsData=[],u.addViewData=function(n){viewsData.push(n)},f=["Cell","Row"],t.selectionType?f.find(t.selectionType)||(t.selectionType="Cell"):t.selectionType="Cell",!t.Headers&&t.Datasource)for(t.Headers=[],r=0;r<t.Datasource.length;r++)if(t.Datasource[r]){n.forEach(t.Datasource[r],function(n){t.Headers[r]=n});break}t.selectContent=function(n,r){if(t.selectionType=="Row"&&n?(delete t.Datasource[i.x].selected,t.SelectedItem=t.Datasource[n],t.Datasource[n].selected=!0,i.x=n):t.selectionType=="Cell"&&r&&(delete t.Datasource[i.x][i.y].selected,t.SelectedItem=t.Datasource[n],t.Datasource[n][r].selected=!0,t.SelectedItem=t.Datasource[n][r],i.x=n,i.y=r),t.onSelectedItemChanged)t.onSelectedItemChanged({item:t.SelectedItem})}}]}}])}(window.angular),function(n){"use strict";n.module("nwprototypes").directive("nwCalendar",["Datetime","nwCalendarFactory",function(t,i){return{template:'<div class="row-calendars"> <div style="display:flex; align-items:center"> <span class="glyphicon glyphicon-arrow-left leftsmall-menu-glyph" data-ng-click="ctrl.previousMonth()"><\/span> <\/div> <div class="row-calendars"> <div data-ng-repeat="(keyMonth, month) in ctrl.DisplayedMonths"data-ng-attr-id="{{\'displayedmonth:\' + keyMonth}}"><label>{{month.currentMonth + \' \' +month.Year}}<\/label><div> <div data-nw-datagrid=""data-on-selected-item-changed="ctrl.SelectDate(item, month);"data-datasource="month.fullMonth"data-headers="Headers"data-are-row-headers-visible="false"data-table-classes="tableClasses"data-header-classes="\'text-center\'"><\/div> <\/div> <\/div> <\/div> <div style="display:flex; align-items:center"> <span class="glyphicon glyphicon-arrow-right rightsmall-menu-glyph" data-ng-click="ctrl.nextMonth()"><\/span> <\/div> <\/div>',scope:{NumberOfMonths:"=numberOfMonths",SelectedDate:"=selectedDate",onDateSelection:"&"},controllerAs:"ctrl",controller:["$scope",function(r){function f(){u.DisplayedMonths.push(i.GetMonthByYearAndMonth(u.DisplayedDate));for(var n=1;n<r.NumberOfMonths;n++)e(n)?u.DisplayedMonths.unshift(i.GetMonthByYearAndMonth(t.calcul.removeMonthsFromDate(u.DisplayedDate,n-1))):u.DisplayedMonths.push(i.GetMonthByYearAndMonth(t.calcul.addMonthsToDate(u.DisplayedDate,n)))}function e(n){return n=Number(n),n===0||!!(n&&!(n%2))}function o(){var n,f;for(u.DisplayedDate=t.calcul.addMonthsToDate(u.DisplayedDate,1),n=[],f=1;f<r.NumberOfMonths;f++)n.push(u.DisplayedMonths[f]);n.push(i.GetMonthByYearAndMonth(t.calcul.addMonthsToDate(u.DisplayedDate,parseInt(r.NumberOfMonths/2))));u.DisplayedMonths=n}function s(){var f,n;for(u.DisplayedDate=t.calcul.removeMonthsFromDate(u.DisplayedDate,1),f=[i.GetMonthByYearAndMonth(t.calcul.removeMonthsFromDate(u.DisplayedDate,parseInt(r.NumberOfMonths/2)))],n=0;n<r.NumberOfMonths-1;n++)f.push(u.DisplayedMonths[n]);u.DisplayedMonths=f}r.NumberOfMonths||(r.NumberOfMonths=1);r.tableClasses="table table-responsive center-justified";r.Headers=["L","M","M","J","V","S","D"];r.FilterCell=i.filterDateForCalendar;var u=this;return n.extend(u,{range:1,nextMonth:o,previousMonth:s,CurrentDate:new Date,DisplayedDate:(new Date).setDate(1),DisplayedMonths:[]}),f(),u.SelectDate=function(n,t){if(r.SelectedDate=new Date(t.Year,t.Month,n),r.onDateSelection)r.onDateSelection({date:r.SelectedDate})},u}]}}])}(window.angular),function(){"use strict";angular.module("datetime",[])}(),function(){"use strict";function n(){function n(n){var t=new Date(n).getMonth(),r=new Date(n).getFullYear(),i;return t===1?(i=new Date(r,t),i.setDate(29),i.getDate()):[0,2,4,6,7,9,11].indexOf(t)===-1?30:31}return{getMonthLength:n}}angular.module("datetime").factory("datetimeMonth",[n])}(),function(){function n(){function n(n){function r(n){return n&&angular.isDefined(n.hours)&&angular.isDefined(n.minutes)?!0:!1}function t(n,t){return{hours:n,minutes:t}}function u(){var n=new Date;return i(n)}function i(n){return n=new Date(n),t(n.getHours(),n.getMinutes())}function f(n){return t(n.hours,n.minutes)}return angular.isDate(n)?i(n):r(n)?f(n):u()}return n}angular.module("datetime").factory("Time",[n])}(),function(){"use strict";function n(){function i(i){return i=t(i),n[i]}function t(n){return n===0?n=6:n-=1,n}function r(t){function r(n){return n===6?n=0:n+=1,n}if(angular.isNumber(t))return r(t);if(angular.isString){var i=n.indexOf(t);if(i!=-1)return r(i)}return t}var n=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche",];return{dayInFrench:i,convertToFrenchDay:t,convertToEnglishDay:r,days:n}}angular.module("datetime").factory("datetimeFrench",["datetimeMonth",n])}(),function(){function n(n,t,i,r){return{month:n,calcul:t,french:i,time:r}}angular.module("datetime").factory("Datetime",["datetimeMonth","datetimeCalcul","datetimeFrench","Time",n])}(),function(){"use strict";function n(n){function t(n,t){return n=new Date(n),t=n.getFullYear()+t,n.setFullYear(t)}function i(n,i){if(n=new Date(n),i=n.getMonth()+i,i<11)return n.setMonth(i);for(var r=0;i>11;)i-=11,r++;return n=t(n,r),new Date(n).setMonth(i)}function f(t,r){t=new Date(t);for(var u=t.getDate()+r;u>n.getMonthLength(t);)u-=n.getMonthLength(t),t=i(t,1);return new Date(t).setDate(u)}function r(n,t){return n=new Date(n),t=n.getFullYear()-t,t>0?n.setFullYear(t):{error:"Date BC not allowed"}}function u(n,t){if(n=new Date(n),t=n.getMonth()-t,t>=0)return n.setMonth(t);for(var i=0;t<0;)t+=11,i++;return n=r(n,i),n.setMonth(t)}function e(n,t){n=new Date(n);for(var i=n.getDate()-t;i<1;)n=u(n,1),i+=monthElement.getMonthLength(n);return n.setDate(i)}function o(n,t){return n.getFullYear()>t.getFullYear()?!0:n.getFullYear()<compareDate.getFullYear()?!1:n.getMonth()>t.getMonth()?!0:n.getMonth()<t.getMonth()?!1:n.getDate()>t.getDate()?!0:n.getDate()<t.getDate()?!1:null}return{addDaysToDate:f,addMonthsToDate:i,addYearsToDate:t,removeDaysFromDate:e,removeMonthsFromDate:u,removeYearsFromDate:r,isDateOver:o}}angular.module("datetime").factory("datetimeCalcul",["datetimeMonth",n])}(),function(){"use strict";angular.module("navigation",[])}(),function(n){"use strict";n.module("navigation").directive("nwNavigationMenu",[function(){return{scope:!0,template:'<div class="navigation-menu"><div class="navigation-element"><span class="glyphicon glyphicon-search menu-glyph" data-ng-click="ctrl.viewSearchBar()"><\/span><span class="navigation-element" data-ng-if="ctrl.isSearchBarVisible"><input type="text" style="width:75%; z-index:1;" /><\/span><\/div><div data-ng-click="ctrl.navClass(\'Acceuil\')" class="navigation-element"> <span class="glyphicon glyphicon-home menu-glyph"><\/span> <span class="element-label">Accueil<\/span> <\/div><div data-ng-click="ctrl.navClass(\'Calendrier\')" class="navigation-element"> <span class="glyphicon glyphicon-calendar menu-glyph"><\/span> <span class="element-label">Calendrier<\/span> <\/div> <div data-ng-click="ctrl.navClass(\'Salles\')" class="navigation-element"><span class="glyphicon glyphicon-list menu-glyph"><\/span><span class="element-label">Les Salles<\/span><\/div> <div data-ng-click="ctrl.navClass(\'Reservations\')" class="navigation-element"><span class="glyphicon glyphicon-credit-card menu-glyph"><\/span><span class="element-label">R\u00e9server<\/span><\/div><div style="height:30%"><\/div> <\/div>',replace:!0,controllerAs:"ctrl",controller:["$scope","$location",function(n,t){var i=this;i.isSearchBarVisible=!1;i.viewSearchBar=function(){i.isSearchBarVisible=!i.isSearchBarVisible};i.navClass=function(n){t.path("/"+n)}}]}}])}(window.angular),function(){"use strict";angular.module("settings",[])}(),function(){"use strict";function n(){var n=new Date(1970,1,1,8,30),t=new Date(1970,1,1,19,30);return{OpeningHours:{start:n,end:t},MinimalTimeRent:30,MinimalSlotSize:15}}angular.module("settings").service("settingsLocationService",[n])}(),function(){"use strict";function n(){return{Week:{maximumSpan:10,maximumRepeat:10},Month:{maximumRepeat:10},Year:{maximumRepeat:10}}}angular.module("settings").service("SettingsPeriodicityService",[n])}(),function(){"use strict";angular.module("shared",["settings","datetime","navigation"])}(),function(){"use strict";function n(n){function f(u,f){return f?n.post(i+u,f).then(r,t):t("\nAucune donn\u00e9e fournie.")}function e(u,f){return f?n.put(i+u,f).then(r,t):t("\nAucune donn\u00e9e fournie.")}function o(u){return n.get(i+u).then(r,t)}function r(n){return{success:!0,data:n}}function t(n){return n}var i="http://localhost:1337/api/",u=this;return angular.extend(u,{_post:f,_get:o,_put:e}),u}angular.module("shared").service("ContextService",["$http",n])}(),function(){"use strict";function n(n){function t(t){n._post("rooms",t)}function i(t){n._post("areas","Error while saving new Area",t)}function r(){return n._get("areas").then(function(n){return n.data})}return this.GetAreas=r,this.SaveArea=i,this.SaveRoom=t,this}angular.module("shared").service("AreaService",["ContextService",n])}(),function(){"use strict";function n(n){function r(){function t(){var t=n.flash;t&&(t.keepAfterLocationChange?t.keepAfterLocationChange=!1:delete n.flash)}n.$on("$locationChangeStart",function(){t()})}function i(t,i,r){n.flash={message:t,type:i,keepAfterLocationChange:r}}function u(n,t,r){var u="",f="";n?(u=t.ifSuccess,f="Success"):(u=t.ifError,f="Error");i(u,r)}function f(n,t,r){n||i(t,"Error",r)}var t=this;return t.NotifyOnError=f,t.NotifyResult=u,r(),t}angular.module("shared").service("NotificationService",["$rootScope",n])}(),function(){"use strict";angular.module("MRBS",["ngRoute","ngCookies","shared","authentication","booking","areas","planning","nwprototypes",])}(),function(){"use strict";function n(n){n.when("/Authentification",{controller:"loginCtrl",templateUrl:"pages/login.html",controllerAs:"ctrl"}).when("/Salles",{controller:"AreaEditController",templateUrl:"pages/areaEdit.html",controllerAs:"ctrl"}).when("/Calendrier",{controller:"PlanningController",templateUrl:"pages/planning.html",controllerAs:"ctrl"}).when("/Aide",{controller:"",templateUrl:"pages/help.html",controllerAs:"ctrl"}).when("/Reservations",{controller:"BookingController",templateUrl:"pages/booking.html",controllerAs:"ctrl"}).otherwise({redirectTo:"/"})}angular.module("MRBS").config(["$routeProvider","$locationProvider",n])}(),function(){"use strict";function n(n,t,i,r){n.globals=i.get("globals")||{};n.globals.currentUser&&(r.defaults.headers.common.Authorization="Basic "+n.globals.currentUser.authdata)}angular.module("MRBS").run(["$rootScope","$location","$cookies","$http",n])}();